# ============================================
# 物流获客AI - 日志轮转配置
# 配置文件位置: /etc/logrotate.d/logistics-ai
# ============================================

# 应用日志轮转
/var/log/logistics-ai/*.log {
    daily
    rotate 14
    compress
    delaycompress
    missingok
    notifempty
    create 0640 root root
    sharedscripts
    postrotate
        # 重新打开日志文件
        docker-compose -f /root/logistics-ai/docker-compose.prod.yml kill -s USR1 backend || true
    endscript
}

# Docker容器日志轮转
/var/lib/docker/containers/*/*.log {
    rotate 7
    daily
    compress
    delaycompress
    missingok
    copytruncate
    size 100M
}
