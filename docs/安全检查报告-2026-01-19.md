# è…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨æ£€æŸ¥æŠ¥å‘Š

**æœåŠ¡å™¨IP**: 81.70.239.82  
**æ£€æŸ¥æ—¶é—´**: 2026-01-19 01:15:04  
**ä½ çš„å…¬ç½‘IP**: 210.149.115.5

---

## ğŸ“Š æ£€æŸ¥æ‘˜è¦

- âœ… **é€šè¿‡**: 10é¡¹
- âš ï¸ **è­¦å‘Š**: 3é¡¹
- âŒ **å¤±è´¥**: 3é¡¹

**æ€»ä½“è¯„ä¼°**: ğŸ”´ **å‘ç°å®‰å…¨é—®é¢˜ï¼Œéœ€è¦ç«‹å³å¤„ç†**

---

## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆéœ€ç«‹å³ä¿®å¤ï¼‰

### 1. PostgreSQLç«¯å£æœªå—ä¿æŠ¤
- **é—®é¢˜**: PostgreSQL (5432) ç«¯å£æœªé…ç½®é˜²ç«å¢™ä¿æŠ¤
- **é£é™©**: æ•°æ®åº“å¯èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼Œå­˜åœ¨æ•°æ®æ³„éœ²é£é™©
- **è§£å†³æ–¹æ¡ˆ**: é…ç½®iptablesè§„åˆ™ï¼Œä»…å…è®¸æœ¬åœ°è®¿é—®

### 2. MySQLç«¯å£æœªå—ä¿æŠ¤
- **é—®é¢˜**: MySQL (33066) ç«¯å£æœªé…ç½®é˜²ç«å¢™ä¿æŠ¤
- **é£é™©**: æ•°æ®åº“å¯èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼Œå­˜åœ¨æ•°æ®æ³„éœ²é£é™©
- **è§£å†³æ–¹æ¡ˆ**: é…ç½®iptablesè§„åˆ™ï¼Œä»…å…è®¸æœ¬åœ°è®¿é—®

### 3. Redisç«¯å£æœªå—ä¿æŠ¤
- **é—®é¢˜**: Redis (6379) ç«¯å£æœªé…ç½®é˜²ç«å¢™ä¿æŠ¤
- **é£é™©**: ç¼“å­˜æ•°æ®å¯èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼Œå­˜åœ¨æ•°æ®æ³„éœ²é£é™©
- **è§£å†³æ–¹æ¡ˆ**: é…ç½®iptablesè§„åˆ™,ä»…å…è®¸æœ¬åœ°è®¿é—®

---

## âš ï¸ è­¦å‘Šé¡¹ï¼ˆå»ºè®®ä¿®å¤ï¼‰

### 1. SSHç«¯å£æœªé…ç½®ç™½åå•
- **é—®é¢˜**: SSH (22) ç«¯å£å¯¹æ‰€æœ‰IPå¼€æ”¾
- **é£é™©**: å®¹æ˜“é­å—æš´åŠ›ç ´è§£æ”»å‡»
- **å»ºè®®**: é…ç½®IPç™½åå•ï¼Œä»…å…è®¸ç‰¹å®šIPè®¿é—®
- **å½“å‰çŠ¶æ€**: å·²å¯ç”¨Fail2Bané˜²æŠ¤ï¼Œä½†å»ºè®®è¿›ä¸€æ­¥åŠ å›º

### 2. ç³»ç»Ÿæ›´æ–°
- **é—®é¢˜**: æœ‰3ä¸ªè½¯ä»¶åŒ…éœ€è¦æ›´æ–°
- **å»ºè®®**: å®šæœŸæ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…ï¼Œä¿®å¤å®‰å…¨æ¼æ´

### 3. SSHç™»å½•å¤±è´¥è®°å½•
- **é—®é¢˜**: æœ€è¿‘æœ‰5æ¬¡SSHç™»å½•å¤±è´¥
- **è¯¦æƒ…**: 
  - æ¥è‡ª 206.189.111.34 çš„rootç™»å½•å°è¯•
- **å½“å‰çŠ¶æ€**: Fail2Banå·²å¯ç”¨ï¼Œä¼šè‡ªåŠ¨å°ç¦æ¶æ„IP

---

## âœ… è‰¯å¥½é…ç½®

1. âœ… SSHå¯†ç ç™»å½•å·²ç¦ç”¨ï¼ˆä»…å…è®¸å¯†é’¥ç™»å½•ï¼‰
2. âœ… Rootç›´æ¥ç™»å½•å·²ç¦ç”¨
3. âœ… SSHå¯†é’¥é…ç½®æ­£ç¡®ï¼ˆ2ä¸ªå¯†é’¥ï¼‰
4. âœ… Fail2BanæœåŠ¡æ­£å¸¸è¿è¡Œ
5. âœ… æ‰€æœ‰å…³é”®æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆnginxã€postgresqlã€redisã€fail2banï¼‰
6. âœ… ç£ç›˜ç©ºé—´å……è¶³ï¼ˆä½¿ç”¨ç‡20%ï¼‰
7. âœ… å†…å­˜ä½¿ç”¨æ­£å¸¸ï¼ˆ28%ï¼‰
8. âœ… CPUè´Ÿè½½æ­£å¸¸ï¼ˆ0.19ï¼‰

---

## ğŸ” ç«¯å£å¼€æ”¾æƒ…å†µ

### å¯¹å¤–å¼€æ”¾çš„ç«¯å£

| ç«¯å£ | æœåŠ¡ | çŠ¶æ€ | å»ºè®® |
|------|------|------|------|
| 22 | SSH | âš ï¸ å…¨å¼€æ”¾ | é…ç½®ç™½åå• |
| 25 | SMTP | âœ… æ­£å¸¸ | ä¿æŒ |
| 80 | HTTP | âœ… æ­£å¸¸ | ä¿æŒ |
| 443 | HTTPS | âœ… æ­£å¸¸ | ä¿æŒ |
| 9000 | Nginx | âœ… æ­£å¸¸ | ä¿æŒ |

### å†…éƒ¨æœåŠ¡ç«¯å£ï¼ˆåº”ä»…æœ¬åœ°è®¿é—®ï¼‰

| ç«¯å£ | æœåŠ¡ | çŠ¶æ€ | é£é™©ç­‰çº§ |
|------|------|------|----------|
| 5432 | PostgreSQL | âŒ æœªä¿æŠ¤ | ğŸ”´ é«˜ |
| 6379 | Redis | âŒ æœªä¿æŠ¤ | ğŸ”´ é«˜ |
| 8000 | åç«¯API | âŒ æœªä¿æŠ¤ | ğŸŸ¡ ä¸­ |
| 33066 | MySQL | âŒ æœªä¿æŠ¤ | ğŸ”´ é«˜ |
| 3000/3001 | å‰ç«¯æœåŠ¡ | â„¹ï¸ æœªæ£€æµ‹ | ğŸŸ¡ ä¸­ |

---

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

### ç«‹å³æ‰§è¡Œï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

1. **è¿è¡Œå®‰å…¨åŠ å›ºè„šæœ¬**
   ```bash
   sudo ./security-hardening.sh
   ```
   è¿™å°†ï¼š
   - âœ… é…ç½®SSHç™½åå•ï¼ˆä»…å…è®¸ 210.149.115.5 å’Œ GitHub Actionsï¼‰
   - âœ… ä¿æŠ¤æ‰€æœ‰æ•°æ®åº“ç«¯å£ï¼ˆä»…å…è®¸æœ¬åœ°è®¿é—®ï¼‰
   - âœ… ä¿æŠ¤å†…éƒ¨æœåŠ¡ç«¯å£
   - âœ… é…ç½®SSHé˜²æš´åŠ›ç ´è§£
   - âœ… æ°¸ä¹…ä¿å­˜é˜²ç«å¢™è§„åˆ™

2. **æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

### å®šæœŸç»´æŠ¤ï¼ˆå»ºè®®ï¼‰

1. **æ¯å‘¨è¿è¡Œå®‰å…¨æ£€æŸ¥**
   ```bash
   sudo ./security-check.sh
   ```

2. **ç›‘æ§Fail2Banæ—¥å¿—**
   ```bash
   sudo fail2ban-client status sshd
   ```

3. **æŸ¥çœ‹SSHç™»å½•æ—¥å¿—**
   ```bash
   sudo tail -f /var/log/auth.log
   ```

4. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
   - ä½¿ç”¨ `scripts/backup/backup-database.sh`

---

## ğŸ“‹ æ‰§è¡Œè®¡åˆ’

### æ­¥éª¤1: å¤‡ä»½ï¼ˆå¿…é¡»ï¼‰
```bash
# åœ¨è…¾è®¯äº‘æ§åˆ¶å°åˆ›å»ºæœåŠ¡å™¨å¿«ç…§
# æˆ–ä½¿ç”¨å‘½ä»¤å¤‡ä»½é˜²ç«å¢™è§„åˆ™
sudo iptables-save > /tmp/iptables-backup-$(date +%Y%m%d).txt
```

### æ­¥éª¤2: ä¸Šä¼ å®‰å…¨è„šæœ¬
```bash
# ä»æœ¬åœ°æ‰§è¡Œ
scp -i /Users/fengzheng/Downloads/Cursor.pem \
  scripts/security-hardening.sh \
  scripts/manage-whitelist.sh \
  ubuntu@81.70.239.82:/home/ubuntu/logistics-ai/scripts/
```

### æ­¥éª¤3: æ‰§è¡Œå®‰å…¨åŠ å›º
```bash
# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh -i /Users/fengzheng/Downloads/Cursor.pem ubuntu@81.70.239.82

# è¿›å…¥è„šæœ¬ç›®å½•
cd /home/ubuntu/logistics-ai/scripts

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x security-hardening.sh manage-whitelist.sh

# è¿è¡Œå®‰å…¨åŠ å›º
sudo ./security-hardening.sh
```

### æ­¥éª¤4: éªŒè¯é…ç½®
```bash
# è¿è¡Œå®‰å…¨æ£€æŸ¥
sudo ./security-check.sh

# æµ‹è¯•SSHè¿æ¥ï¼ˆå¼€å¯æ–°çš„ç»ˆç«¯çª—å£ï¼‰
ssh -i /Users/fengzheng/Downloads/Cursor.pem ubuntu@81.70.239.82
```

### æ­¥éª¤5: ç³»ç»Ÿæ›´æ–°
```bash
sudo apt update && sudo apt upgrade -y
```

---

## âš ï¸ é‡è¦æç¤º

1. **æ‰§è¡Œå‰å¿…é¡»å¤‡ä»½**: åœ¨è…¾è®¯äº‘æ§åˆ¶å°åˆ›å»ºæœåŠ¡å™¨å¿«ç…§
2. **ä¿æŒSSHè¿æ¥**: æ‰§è¡Œå®‰å…¨åŠ å›ºæ—¶ï¼Œä¸è¦å…³é—­å½“å‰SSHä¼šè¯
3. **æµ‹è¯•æ–°è¿æ¥**: é…ç½®å®Œæˆåï¼Œå…ˆæµ‹è¯•æ–°çš„SSHè¿æ¥æ˜¯å¦æ­£å¸¸
4. **ä¿å­˜å¯†é’¥**: ç¡®ä¿SSHç§é’¥ï¼ˆCursor.pemï¼‰å®‰å…¨ä¿å­˜
5. **è®°å½•ç™½åå•**: å¦‚æœIPå˜æ›´ï¼Œä½¿ç”¨ `manage-whitelist.sh` ç®¡ç†

---

## ğŸ†˜ ç´§æ€¥è”ç³»æ–¹å¼

å¦‚æœæ‰§è¡Œå®‰å…¨åŠ å›ºåæ— æ³•è¿æ¥æœåŠ¡å™¨ï¼š

1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°
2. ä½¿ç”¨VNCç™»å½•æœåŠ¡å™¨
3. è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸´æ—¶å¼€æ”¾SSHï¼š
   ```bash
   sudo iptables -I INPUT -p tcp --dport 22 -j ACCEPT
   ```
4. é‡æ–°æ·»åŠ ä½ çš„IPåˆ°ç™½åå•

---

## ğŸ“ é™„å½•

### å½“å‰ç½‘ç»œè¿æ¥ç»Ÿè®¡

**æ´»è·ƒè¿æ¥æ•°**: 8

**è¿æ¥æœ€å¤šçš„IPï¼ˆå‰5ï¼‰**:
1. 127.0.0.1 (16æ¬¡) - æœ¬åœ°è¿æ¥
2. 168.70.80.60 (3æ¬¡) - éœ€ç¡®è®¤
3. 169.254.0.55 (2æ¬¡) - é“¾è·¯æœ¬åœ°åœ°å€
4. 172.172.86.225 (1æ¬¡) - éœ€ç¡®è®¤
5. 169.254.0.138 (1æ¬¡) - é“¾è·¯æœ¬åœ°åœ°å€

### æœ€è¿‘ç™»å½•è®°å½•

- 2026-01-17 12:35 - ubuntu from 106.55.203.200
- 2026-01-17 10:59 - ubuntu from 81.69.102.134
- 2026-01-14 18:20 - ubuntu from 106.55.203.212

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-01-19  
**ä¸‹æ¬¡æ£€æŸ¥å»ºè®®**: 2026-01-26ï¼ˆä¸€å‘¨åï¼‰
